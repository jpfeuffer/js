!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3"),require("ProtvistaZoomable")):"function"==typeof define&&define.amd?define(["d3","ProtvistaZoomable"],e):"object"==typeof exports?exports.ProtvistaTrack=e(require("d3"),require("ProtvistaZoomable")):t.ProtvistaTrack=e(t.d3,t.ProtvistaZoomable)}(window,(function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([function(t,e,n){"use strict";var r=n(8),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){"use strict";(function(t){var r=n(0),i=n(15),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===o?r.a.Buffer:void 0,c=(u?u.isBuffer:void 0)||i.a;e.a=c}).call(this,n(13)(t))},function(e,n){e.exports=t},function(t,e,n){var r=n(22);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(23),i=n(24);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(25))},function(t,e,n){var r=n(17),i=n(18),o=n(19),a=n(20);t.exports=function(t){return r(t)||i(t)||o(t)||a()}},function(t,n){t.exports=e},function(t,e,n){"use strict";(function(t){var r=n(8),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.a.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=u}).call(this,n(13)(t))},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){var r=n(21);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},i(e,n,o||e)}t.exports=i},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){t.exports=n(26)},function(t,e,n){var r=n(12);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(3);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"DefaultLayout",(function(){return vr}));var r=n(9),i=n.n(r),o=n(1),a=n.n(o),u=n(2),c=n.n(u),s=n(14),l=n.n(s),f=n(6),h=n.n(f),p=n(7),d=n.n(p),v=n(3),g=n.n(v),y=n(5);var b=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var _=function(t){return t!=t};var m=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var j=function(t,e,n){return e==e?m(t,e,n):b(t,_,n)},w=n(0),O=w.a.Symbol,L=Object.prototype,k=L.hasOwnProperty,S=L.toString,A=O?O.toStringTag:void 0;var C=function(t){var e=k.call(t,A),n=t[A];try{t[A]=void 0;var r=!0}catch(t){}var i=S.call(t);return r&&(e?t[A]=n:delete t[A]),i},x=Object.prototype.toString;var M=function(t){return x.call(t)},F=O?O.toStringTag:void 0;var P=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":F&&F in Object(t)?C(t):M(t)};var H=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var T=function(t){if(!H(t))return!1;var e=P(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var E=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var N=function(t){return null!=t&&E(t.length)&&!T(t)},W=Array.isArray;var I=function(t){return null!=t&&"object"==typeof t};var R=function(t){return"string"==typeof t||!W(t)&&I(t)&&"[object String]"==P(t)};var D=function(t){return"symbol"==typeof t||I(t)&&"[object Symbol]"==P(t)},q=/^\s+|\s+$/g,B=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,Z=/^0o[0-7]+$/i,U=parseInt;var $=function(t){if("number"==typeof t)return t;if(D(t))return NaN;if(H(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=H(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(q,"");var n=z.test(t);return n||Z.test(t)?U(t.slice(2),n?2:8):B.test(t)?NaN:+t};var G=function(t){return t?(t=$(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Y=function(t){var e=G(t),n=e%1;return e==e?n?e-n:e:0};var V=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var X=function(t,e){return V(e,(function(e){return t[e]}))};var Q=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var K=function(t){return I(t)&&"[object Arguments]"==P(t)},J=Object.prototype,tt=J.hasOwnProperty,et=J.propertyIsEnumerable,nt=K(function(){return arguments}())?K:function(t){return I(t)&&tt.call(t,"callee")&&!et.call(t,"callee")},rt=n(4),it=/^(?:0|[1-9]\d*)$/;var ot=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&it.test(t))&&t>-1&&t%1==0&&t<e},at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1;var ut=function(t){return I(t)&&E(t.length)&&!!at[P(t)]};var ct=function(t){return function(e){return t(e)}},st=n(11),lt=st.a&&st.a.isTypedArray,ft=lt?ct(lt):ut,ht=Object.prototype.hasOwnProperty;var pt=function(t,e){var n=W(t),r=!n&&nt(t),i=!n&&!r&&Object(rt.a)(t),o=!n&&!r&&!i&&ft(t),a=n||r||i||o,u=a?Q(t.length,String):[],c=u.length;for(var s in t)!e&&!ht.call(t,s)||a&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ot(s,c))||u.push(s);return u},dt=Object.prototype;var vt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||dt)};var gt=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),yt=Object.prototype.hasOwnProperty;var bt=function(t){if(!vt(t))return gt(t);var e=[];for(var n in Object(t))yt.call(t,n)&&"constructor"!=n&&e.push(n);return e};var _t=function(t){return N(t)?pt(t):bt(t)};var mt=function(t){return null==t?[]:X(t,_t(t))},jt=Math.max;var wt,Ot=function(t,e,n,r){t=N(t)?t:mt(t),n=n&&!r?Y(n):0;var i=t.length;return n<0&&(n=jt(i+n,0)),R(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&j(t,e,n)>-1},Lt=w.a["__core-js_shared__"],kt=(wt=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var St=function(t){return!!kt&&kt in t},At=Function.prototype.toString;var Ct=function(t){if(null!=t){try{return At.call(t)}catch(t){}try{return t+""}catch(t){}}return""},xt=/^\[object .+?Constructor\]$/,Mt=Function.prototype,Ft=Object.prototype,Pt=Mt.toString,Ht=Ft.hasOwnProperty,Tt=RegExp("^"+Pt.call(Ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Et=function(t){return!(!H(t)||St(t))&&(T(t)?Tt:xt).test(Ct(t))};var Nt=function(t,e){return null==t?void 0:t[e]};var Wt=function(t,e){var n=Nt(t,e);return Et(n)?n:void 0},It=function(){try{var t=Wt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Rt=function(t,e,n){"__proto__"==e&&It?It(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Dt=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r};var qt=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),u=a.length;u--;){var c=a[t?u:++i];if(!1===n(o[c],c,o))break}return e}}();var Bt=function(t,e){return function(n,r){if(null==n)return n;if(!N(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}((function(t,e){return t&&qt(t,e,_t)}));var zt=function(t,e,n,r){return Bt(t,(function(t,i,o){e(r,t,n(t),o)})),r};var Zt=function(){this.__data__=[],this.size=0};var Ut=function(t,e){return t===e||t!=t&&e!=e};var $t=function(t,e){for(var n=t.length;n--;)if(Ut(t[n][0],e))return n;return-1},Gt=Array.prototype.splice;var Yt=function(t){var e=this.__data__,n=$t(e,t);return!(n<0)&&(n==e.length-1?e.pop():Gt.call(e,n,1),--this.size,!0)};var Vt=function(t){var e=this.__data__,n=$t(e,t);return n<0?void 0:e[n][1]};var Xt=function(t){return $t(this.__data__,t)>-1};var Qt=function(t,e){var n=this.__data__,r=$t(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kt.prototype.clear=Zt,Kt.prototype.delete=Yt,Kt.prototype.get=Vt,Kt.prototype.has=Xt,Kt.prototype.set=Qt;var Jt=Kt;var te=function(){this.__data__=new Jt,this.size=0};var ee=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var ne=function(t){return this.__data__.get(t)};var re=function(t){return this.__data__.has(t)},ie=Wt(w.a,"Map"),oe=Wt(Object,"create");var ae=function(){this.__data__=oe?oe(null):{},this.size=0};var ue=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ce=Object.prototype.hasOwnProperty;var se=function(t){var e=this.__data__;if(oe){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ce.call(e,t)?e[t]:void 0},le=Object.prototype.hasOwnProperty;var fe=function(t){var e=this.__data__;return oe?void 0!==e[t]:le.call(e,t)};var he=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=oe&&void 0===e?"__lodash_hash_undefined__":e,this};function pe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pe.prototype.clear=ae,pe.prototype.delete=ue,pe.prototype.get=se,pe.prototype.has=fe,pe.prototype.set=he;var de=pe;var ve=function(){this.size=0,this.__data__={hash:new de,map:new(ie||Jt),string:new de}};var ge=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ye=function(t,e){var n=t.__data__;return ge(e)?n["string"==typeof e?"string":"hash"]:n.map};var be=function(t){var e=ye(this,t).delete(t);return this.size-=e?1:0,e};var _e=function(t){return ye(this,t).get(t)};var me=function(t){return ye(this,t).has(t)};var je=function(t,e){var n=ye(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function we(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}we.prototype.clear=ve,we.prototype.delete=be,we.prototype.get=_e,we.prototype.has=me,we.prototype.set=je;var Oe=we;var Le=function(t,e){var n=this.__data__;if(n instanceof Jt){var r=n.__data__;if(!ie||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Oe(r)}return n.set(t,e),this.size=n.size,this};function ke(t){var e=this.__data__=new Jt(t);this.size=e.size}ke.prototype.clear=te,ke.prototype.delete=ee,ke.prototype.get=ne,ke.prototype.has=re,ke.prototype.set=Le;var Se=ke;var Ae=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var Ce=function(t){return this.__data__.has(t)};function xe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Oe;++e<n;)this.add(t[e])}xe.prototype.add=xe.prototype.push=Ae,xe.prototype.has=Ce;var Me=xe;var Fe=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Pe=function(t,e){return t.has(e)};var He=function(t,e,n,r,i,o){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var s=o.get(t),l=o.get(e);if(s&&l)return s==e&&l==t;var f=-1,h=!0,p=2&n?new Me:void 0;for(o.set(t,e),o.set(e,t);++f<u;){var d=t[f],v=e[f];if(r)var g=a?r(v,d,f,e,t,o):r(d,v,f,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!Fe(e,(function(t,e){if(!Pe(p,e)&&(d===t||i(d,t,n,r,o)))return p.push(e)}))){h=!1;break}}else if(d!==v&&!i(d,v,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},Te=w.a.Uint8Array;var Ee=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var Ne=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},We=O?O.prototype:void 0,Ie=We?We.valueOf:void 0;var Re=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Te(t),new Te(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ut(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=Ee;case"[object Set]":var c=1&r;if(u||(u=Ne),t.size!=e.size&&!c)return!1;var s=a.get(t);if(s)return s==e;r|=2,a.set(t,e);var l=He(u(t),u(e),r,i,o,a);return a.delete(t),l;case"[object Symbol]":if(Ie)return Ie.call(t)==Ie.call(e)}return!1};var De=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};var qe=function(t,e,n){var r=e(t);return W(t)?r:De(r,n(t))};var Be=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var ze=function(){return[]},Ze=Object.prototype.propertyIsEnumerable,Ue=Object.getOwnPropertySymbols,$e=Ue?function(t){return null==t?[]:(t=Object(t),Be(Ue(t),(function(e){return Ze.call(t,e)})))}:ze;var Ge=function(t){return qe(t,_t,$e)},Ye=Object.prototype.hasOwnProperty;var Ve=function(t,e,n,r,i,o){var a=1&n,u=Ge(t),c=u.length;if(c!=Ge(e).length&&!a)return!1;for(var s=c;s--;){var l=u[s];if(!(a?l in e:Ye.call(e,l)))return!1}var f=o.get(t),h=o.get(e);if(f&&h)return f==e&&h==t;var p=!0;o.set(t,e),o.set(e,t);for(var d=a;++s<c;){var v=t[l=u[s]],g=e[l];if(r)var y=a?r(g,v,l,e,t,o):r(v,g,l,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(t),o.delete(e),p},Xe=Wt(w.a,"DataView"),Qe=Wt(w.a,"Promise"),Ke=Wt(w.a,"Set"),Je=Wt(w.a,"WeakMap"),tn=Ct(Xe),en=Ct(ie),nn=Ct(Qe),rn=Ct(Ke),on=Ct(Je),an=P;(Xe&&"[object DataView]"!=an(new Xe(new ArrayBuffer(1)))||ie&&"[object Map]"!=an(new ie)||Qe&&"[object Promise]"!=an(Qe.resolve())||Ke&&"[object Set]"!=an(new Ke)||Je&&"[object WeakMap]"!=an(new Je))&&(an=function(t){var e=P(t),n="[object Object]"==e?t.constructor:void 0,r=n?Ct(n):"";if(r)switch(r){case tn:return"[object DataView]";case en:return"[object Map]";case nn:return"[object Promise]";case rn:return"[object Set]";case on:return"[object WeakMap]"}return e});var un=an,cn=Object.prototype.hasOwnProperty;var sn=function(t,e,n,r,i,o){var a=W(t),u=W(e),c=a?"[object Array]":un(t),s=u?"[object Array]":un(e),l="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s),h=c==s;if(h&&Object(rt.a)(t)){if(!Object(rt.a)(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new Se),a||ft(t)?He(t,e,n,r,i,o):Re(t,e,c,n,r,i,o);if(!(1&n)){var p=l&&cn.call(t,"__wrapped__"),d=f&&cn.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,g=d?e.value():e;return o||(o=new Se),i(v,g,n,r,o)}}return!!h&&(o||(o=new Se),Ve(t,e,n,r,i,o))};var ln=function t(e,n,r,i,o){return e===n||(null==e||null==n||!I(e)&&!I(n)?e!=e&&n!=n:sn(e,n,r,i,t,o))};var fn=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var c=(u=n[i])[0],s=t[c],l=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var f=new Se;if(r)var h=r(s,l,c,t,e,f);if(!(void 0===h?ln(l,s,3,r,f):h))return!1}}return!0};var hn=function(t){return t==t&&!H(t)};var pn=function(t){for(var e=_t(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,hn(i)]}return e};var dn=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var vn=function(t){var e=pn(t);return 1==e.length&&e[0][2]?dn(e[0][0],e[0][1]):function(n){return n===t||fn(n,t,e)}},gn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yn=/^\w*$/;var bn=function(t,e){if(W(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!D(t))||(yn.test(t)||!gn.test(t)||null!=e&&t in Object(e))};function _n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(_n.Cache||Oe),n}_n.Cache=Oe;var mn=_n;var jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wn=/\\(\\)?/g,On=function(t){var e=mn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(jn,(function(t,n,r,i){e.push(r?i.replace(wn,"$1"):n||t)})),e})),Ln=O?O.prototype:void 0,kn=Ln?Ln.toString:void 0;var Sn=function t(e){if("string"==typeof e)return e;if(W(e))return V(e,t)+"";if(D(e))return kn?kn.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var An=function(t){return null==t?"":Sn(t)};var Cn=function(t,e){return W(t)?t:bn(t,e)?[t]:On(An(t))};var xn=function(t){if("string"==typeof t||D(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Mn=function(t,e){for(var n=0,r=(e=Cn(e,t)).length;null!=t&&n<r;)t=t[xn(e[n++])];return n&&n==r?t:void 0};var Fn=function(t,e,n){var r=null==t?void 0:Mn(t,e);return void 0===r?n:r};var Pn=function(t,e){return null!=t&&e in Object(t)};var Hn=function(t,e,n){for(var r=-1,i=(e=Cn(e,t)).length,o=!1;++r<i;){var a=xn(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&E(i)&&ot(a,i)&&(W(t)||nt(t))};var Tn=function(t,e){return null!=t&&Hn(t,e,Pn)};var En=function(t,e){return bn(t)&&hn(e)?dn(xn(t),e):function(n){var r=Fn(n,t);return void 0===r&&r===e?Tn(n,t):ln(e,r,3)}};var Nn=function(t){return t};var Wn=function(t){return function(e){return null==e?void 0:e[t]}};var In=function(t){return function(e){return Mn(e,t)}};var Rn=function(t){return bn(t)?Wn(xn(t)):In(t)};var Dn=function(t){return"function"==typeof t?t:null==t?Nn:"object"==typeof t?W(t)?En(t[0],t[1]):vn(t):Rn(t)};var qn=function(t,e){return function(n,r){var i=W(n)?Dt:zt,o=e?e():{};return i(n,t,Dn(r,2),o)}},Bn=Object.prototype.hasOwnProperty,zn=qn((function(t,e,n){Bn.call(t,n)?t[n].push(e):Rt(t,n,[e])})),Zn=O?O.isConcatSpreadable:void 0;var Un=function(t){return W(t)||nt(t)||!!(Zn&&t&&t[Zn])};var $n=function t(e,n,r,i,o){var a=-1,u=e.length;for(r||(r=Un),o||(o=[]);++a<u;){var c=e[a];n>0&&r(c)?n>1?t(c,n-1,r,i,o):De(o,c):i||(o[o.length]=c)}return o};var Gn=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Yn=Math.max;var Vn=function(t,e,n){return e=Yn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Yn(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),Gn(t,this,u)}};var Xn=function(t){return function(){return t}},Qn=It?function(t,e){return It(t,"toString",{configurable:!0,enumerable:!1,value:Xn(e),writable:!0})}:Nn,Kn=Date.now;var Jn=function(t){var e=0,n=0;return function(){var r=Kn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Qn);var tr=function(t,e){return Jn(Vn(t,e,Nn),t+"")};var er=function(t,e){return!!(null==t?0:t.length)&&j(t,e,0)>-1};var nr=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var rr=function(){},ir=Ke&&1/Ne(new Ke([,-0]))[1]==1/0?function(t){return new Ke(t)}:rr;var or=function(t,e,n){var r=-1,i=er,o=t.length,a=!0,u=[],c=u;if(n)a=!1,i=nr;else if(o>=200){var s=e?null:ir(t);if(s)return Ne(s);a=!1,i=Pe,c=new Me}else c=e?[]:u;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var h=c.length;h--;)if(c[h]===f)continue t;e&&c.push(f),u.push(l)}else i(c,f,n)||(c!==u&&c.push(f),u.push(l))}return u};var ar=function(t){return I(t)&&N(t)},ur=tr((function(t){return or($n(t,1,ar,!0))})),cr=Math.min;var sr=function(t,e,n){for(var r=n?nr:er,i=t[0].length,o=t.length,a=o,u=Array(o),c=1/0,s=[];a--;){var l=t[a];a&&e&&(l=V(l,ct(e))),c=cr(l.length,c),u[a]=!n&&(e||i>=120&&l.length>=120)?new Me(a&&l):void 0}l=t[0];var f=-1,h=u[0];t:for(;++f<i&&s.length<c;){var p=l[f],d=e?e(p):p;if(p=n||0!==p?p:0,!(h?Pe(h,d):r(s,d,n))){for(a=o;--a;){var v=u[a];if(!(v?Pe(v,d):r(t[a],d,n)))continue t}h&&h.push(d),s.push(p)}}return s};var lr=function(t){return ar(t)?t:[]},fr=tr((function(t){var e=V(t,lr);return e.length&&e[0]===t[0]?sr(e):[]})),hr=n(10),pr=n.n(hr),dr=function(){function t(){a()(this,t)}return c()(t,[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+"-6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+"-6,"+"-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+"-6Z"}},{key:"_line",value:function(){return"M0,".concat(this._ftHeight/2," L").concat(this._ftWidth,",").concat(this._ftHeight/2)}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),r="",i=0;i<n;i++){r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+","+"2.5 "+e+", 0 C"+(e-t)+","+"2.5 "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5}return r}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+("M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z")}}],[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}]),t}(),vr=function(){function t(e){var n=e.layoutHeight,r=e.padding,i=void 0===r?1:r,o=e.minHeight,u=void 0===o?17:o;a()(this,t),this._padding=i,this._minHeight=u,this._layoutHeight=n}return c()(t,[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){var t=this.getFeatureHeight();return this._layoutHeight/2-t/2}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}]),t}();function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var yr=function(t,e){return e.some((function(e){return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r}))},br=function(t){h()(n,t);var e=gr(n);function n(t){var r;return a()(this,n),(r=e.call(this,t)).featuresMap=new Map,r._rowHeight=0,r._rows=[],r._minHeight=15,r}return c()(n,[{key:"init",value:function(t){var e=this;t.forEach((function(t){var n=e._rows.findIndex((function(e){return!yr(t,e)}));n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}]),n}(vr),_r={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},mr=function(t){if(_r[t.toUpperCase()])return _r[t.toUpperCase()].shape;var e=Object.values(_r).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e?e.shape:"rectangle"},jr=function(t){if(_r[t.toUpperCase()])return _r[t.toUpperCase()].color;var e=Object.values(_r).find((function(e){return e.name.toUpperCase()===t.toUpperCase()}));return e||console.log(t),e?e.color:"black"};function wr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Or(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Or(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Or(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var kr=function(t){h()(n,t);var e=Lr(n);function n(){return a()(this,n),e.apply(this,arguments)}return c()(n,[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new br({layoutHeight:this._height}):new vr({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;l()(g()(n.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new dr,this._layoutObj=this.getLayout(),this.createTooltip=this.createTooltip.bind(this),this._data&&this._createTrack(),this.addEventListener("load",(function(e){Ot(t.children,e.target)&&(t.data=e.detail.payload)}))}},{key:"processData",value:function(t){this._originalData=n.normalizeLocations(t)}},{key:"data",set:function(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}},{key:"filters",set:function(t){this._filters=t,this._applyFilters(),this._createTrack()}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?jr(t.type):t.feature&&t.feature.type?jr(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?mr(t.type):t.feature&&t.feature.type?mr(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(y.select)(this).selectAll("div").remove(),this.svg=Object(y.select)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class",(function(t){return"feature-group ".concat(t.accession)})).attr("id",(function(t){return"g_".concat(t.accession)})).selectAll("g.location-group").data((function(t){return t.locations.map((function(e){return Object.assign({},e,{feature:t})}))})).enter().append("g").attr("class","location-group");var e=this.locations.selectAll("g.fragment-group").data((function(t){return t.fragments.map((function(e){return Object.assign({},e,{feature:t.feature})}))})).enter().append("g").attr("class","fragment-group");e.append("path").attr("class",(function(e){return"".concat(t._getShape(e)," feature")})).attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("tooltip-trigger","true").attr("fill",(function(e){return t._getFeatureFillColor(e)})).attr("stroke",(function(e){return t._getFeatureColor(e)})).style("fill-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})).style("stroke-opacity",(function(t){var e=t.feature;return e.opacity?e.opacity:.9})),e.append("rect").attr("class","outer-rectangle feature").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})).attr("fill","transparent").attr("stroke","transparent").call(this.bindEvents,this).on("click",(function(e){t.createTooltip(y.event,e,!0),t.dispatchEvent(t.createEvent("click",e,"onclick"===t._highlightEvent,e.start,e.end))}))}},{key:"getCurrentFrameAbsolutePosition",value:function(){for(var t,e,n=window,r=[];n!==window.top;){t=n.parent;for(var i=0;i<t.frames.length;i++)if(t.frames[i]===n){var o,a=wr(t.document.getElementsByTagName("iframe"));try{for(a.s();!(o=a.n()).done;){var u=o.value;u.contentWindow===n&&(e=u.getBoundingClientRect(),r.push({x:e.x,y:e.y}))}}catch(t){a.e(t)}finally{a.f()}n=t;break}}return r.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0})}},{key:"createTooltip",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.feature&&e.feature.tooltipContent){this.removeAllTooltips();var i=document.createElement("protvista-tooltip");i.innerHTML=e.feature.tooltipContent,i.y=t.clientY+window.scrollY+3,i.x=t.clientX+window.scrollX+2,i.title="".concat(e.feature.type," ").concat(e.start,"-").concat(e.end),i.closeable=r,i.visible=!0,i.addEventListener("mouseleave",(function(t){n.removeChild(i)})),this.appendChild(i);var o=this.svg._groups[0][0].clientWidth,a=Object(y.select)(i).node().getBoundingClientRect();a.width+a.x>o&&(this.removeChild(i),i.left=o-a.width,i.mirror="H",this.appendChild(i))}}},{key:"removeAllTooltips",value:function(){document.querySelectorAll("protvista-tooltip").forEach((function(t){return t.remove()}))}},{key:"_applyFilters",value:function(){var t=this;if(!this._filters||this._filters.length<=0)this._data=this._originalData;else{var e=zn(this._filters,"category"),n=Object.values(e).map((function(e){var n=e.map((function(e){return e.filterFn(t._originalData)}));return ur.apply(void 0,i()(n))})),r=fr.apply(void 0,i()(n));this._data=r}}},{key:"refresh",value:function(){var t=this;if(this.xScale&&this.seq_g){var e=this.seq_g.selectAll("g.fragment-group").data(this._data.reduce((function(t,e){return t.concat(e.locations.reduce((function(t,n){return t.concat(n.fragments.map((function(t){return Object.assign({},t,{feature:e})})))}),[]))}),[]));e.selectAll("path.feature").attr("d",(function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),e.selectAll("rect.outer-rectangle").attr("width",(function(e){return t.getSingleBaseWidth()*(e.end?e.end-e.start+1:1)})).attr("height",(function(e){return t._layoutObj.getFeatureHeight(e)})).attr("transform",(function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")})),this._updateHighlight()}}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}}],[{key:"normalizeLocations",value:function(t){return t.map((function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})}))}},{key:"observedAttributes",get:function(){return pr.a.observedAttributes.concat(["highlight","color","shape","filters"])}}]),n}(pr.a),Sr=function(){customElements.define("protvista-track",kr)};window.customElements?Sr():document.addEventListener("WebComponentsReady",(function(){Sr()}));e.default=kr}])}));
//# sourceMappingURL=protvista-track.js.map